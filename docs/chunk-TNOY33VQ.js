import{A as be,B as Ve,C as Xe,Ea as Pe,Eb as tt,G as we,Gb as st,H as Ge,M as J,O as Je,P as We,S as ne,T,X as R,Y as A,Z as E,a as h,b as p,c as ge,d as I,e as Q,f as q,ha as Oe,i as j,ja as _e,ka as W,l as Be,la as _,lb as Ye,ma as Se,o as ze,p as G,qa as ie,r as ve,t as $e,u as k,wb as Ze,ya as Ee,za as Ce,zb as et}from"./chunk-RFOVZSMI.js";var Z=class{},ae=class{},N=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(s=>{let r=s.indexOf(":");if(r>0){let n=s.slice(0,r),i=n.toLowerCase(),o=s.slice(r+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(o):this.headers.set(i,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((s,r)=>{this.setHeaderEntries(r,s)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([s,r])=>{this.setHeaderEntries(s,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let s=this.headers.get(t.toLowerCase());return s&&s.length>0?s[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,s){return this.clone({name:t,value:s,op:"a"})}set(t,s){return this.clone({name:t,value:s,op:"s"})}delete(t,s){return this.clone({name:t,value:s,op:"d"})}maybeSetNormalizedName(t,s){this.normalizedNames.has(s)||this.normalizedNames.set(s,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(s=>{this.headers.set(s,t.headers.get(s)),this.normalizedNames.set(s,t.normalizedNames.get(s))})}clone(t){let s=new e;return s.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,s.lazyUpdate=(this.lazyUpdate||[]).concat([t]),s}applyUpdate(t){let s=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,s);let n=(t.op==="a"?this.headers.get(s):void 0)||[];n.push(...r),this.headers.set(s,n);break;case"d":let i=t.value;if(!i)this.headers.delete(s),this.normalizedNames.delete(s);else{let o=this.headers.get(s);if(!o)return;o=o.filter(a=>i.indexOf(a)===-1),o.length===0?(this.headers.delete(s),this.normalizedNames.delete(s)):this.headers.set(s,o)}break}}setHeaderEntries(t,s){let r=(Array.isArray(s)?s:[s]).map(i=>i.toString()),n=t.toLowerCase();this.headers.set(n,r),this.maybeSetNormalizedName(t,n)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(s=>t(this.normalizedNames.get(s),this.headers.get(s)))}};var Te=class{encodeKey(t){return rt(t)}encodeValue(t){return rt(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function xt(e,t){let s=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(n=>{let i=n.indexOf("="),[o,a]=i==-1?[t.decodeKey(n),""]:[t.decodeKey(n.slice(0,i)),t.decodeValue(n.slice(i+1))],c=s.get(o)||[];c.push(a),s.set(o,c)}),s}var jt=/%(\d[a-f0-9])/gi,kt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function rt(e){return encodeURIComponent(e).replace(jt,(t,s)=>kt[s]??t)}function oe(e){return`${e}`}var x=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Te,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=xt(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(s=>{let r=t.fromObject[s],n=Array.isArray(r)?r.map(oe):[oe(r)];this.map.set(s,n)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let s=this.map.get(t);return s?s[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,s){return this.clone({param:t,value:s,op:"a"})}appendAll(t){let s=[];return Object.keys(t).forEach(r=>{let n=t[r];Array.isArray(n)?n.forEach(i=>{s.push({param:r,value:i,op:"a"})}):s.push({param:r,value:n,op:"a"})}),this.clone(s)}set(t,s){return this.clone({param:t,value:s,op:"s"})}delete(t,s){return this.clone({param:t,value:s,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let s=this.encoder.encodeKey(t);return this.map.get(t).map(r=>s+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let s=new e({encoder:this.encoder});return s.cloneFrom=this.cloneFrom||this,s.updates=(this.updates||[]).concat(t),s}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let s=(t.op==="a"?this.map.get(t.param):void 0)||[];s.push(oe(t.value)),this.map.set(t.param,s);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],n=r.indexOf(oe(t.value));n!==-1&&r.splice(n,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Me=class{constructor(){this.map=new Map}set(t,s){return this.map.set(t,s),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Nt(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function nt(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function it(e){return typeof Blob<"u"&&e instanceof Blob}function ot(e){return typeof FormData<"u"&&e instanceof FormData}function Ut(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Y=class e{constructor(t,s,r,n){this.url=s,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let i;if(Nt(this.method)||n?(this.body=r!==void 0?r:null,i=n):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers||(this.headers=new N),this.context||(this.context=new Me),!this.params)this.params=new x,this.urlWithParams=s;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=s;else{let a=s.indexOf("?"),c=a===-1?"?":a<s.length-1?"&":"";this.urlWithParams=s+c+o}}}serializeBody(){return this.body===null?null:nt(this.body)||it(this.body)||ot(this.body)||Ut(this.body)||typeof this.body=="string"?this.body:this.body instanceof x?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ot(this.body)?null:it(this.body)?this.body.type||null:nt(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof x?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let s=t.method||this.method,r=t.url||this.url,n=t.responseType||this.responseType,i=t.body!==void 0?t.body:this.body,o=t.withCredentials!==void 0?t.withCredentials:this.withCredentials,a=t.reportProgress!==void 0?t.reportProgress:this.reportProgress,c=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((m,v)=>m.set(v,t.setHeaders[v]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((m,v)=>m.set(v,t.setParams[v]),u)),new e(s,r,i,{params:u,headers:c,context:d,reportProgress:a,responseType:n,withCredentials:o})}},K=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(K||{}),ee=class{constructor(t,s=200,r="OK"){this.headers=t.headers||new N,this.status=t.status!==void 0?t.status:s,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Fe=class e extends ee{constructor(t={}){super(t),this.type=K.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ue=class e extends ee{constructor(t={}){super(t),this.type=K.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ce=class extends ee{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}};function Re(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var De=(()=>{let t=class t{constructor(r){this.handler=r}request(r,n,i={}){let o;if(r instanceof Y)o=r;else{let u;i.headers instanceof N?u=i.headers:u=new N(i.headers);let d;i.params&&(i.params instanceof x?d=i.params:d=new x({fromObject:i.params})),o=new Y(r,n,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=G(o).pipe(Xe(u=>this.handler.handle(u)));if(r instanceof Y||i.observe==="events")return a;let c=a.pipe(be(u=>u instanceof ue));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(k(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(k(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(k(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(k(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(r,n={}){return this.request("DELETE",r,n)}get(r,n={}){return this.request("GET",r,n)}head(r,n={}){return this.request("HEAD",r,n)}jsonp(r,n){return this.request("JSONP",r,{params:new x().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,n={}){return this.request("OPTIONS",r,n)}patch(r,n,i={}){return this.request("PATCH",r,Re(i,n))}post(r,n,i={}){return this.request("POST",r,Re(i,n))}put(r,n,i={}){return this.request("PUT",r,Re(i,n))}};t.\u0275fac=function(n){return new(n||t)(A(Z))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();function Lt(e,t){return t(e)}function Qt(e,t,s){return(r,n)=>W(s,()=>t(r,i=>e(i,n)))}var ht=new R(""),qt=new R(""),Kt=new R("");var at=(()=>{let t=class t extends Z{constructor(r,n){super(),this.backend=r,this.injector=n,this.chain=null,this.pendingTasks=E(Ye);let i=E(Kt,{optional:!0});this.backend=i??r}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(ht),...this.injector.get(qt,[])]));this.chain=i.reduceRight((o,a)=>Qt(o,a,this.injector),Lt)}let n=this.pendingTasks.add();return this.chain(r,i=>this.backend.handle(i)).pipe(Ge(()=>this.pendingTasks.remove(n)))}};t.\u0275fac=function(n){return new(n||t)(A(ae),A(_e))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();var Ht=/^\)\]\}',?\n/;function Bt(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var ut=(()=>{let t=class t{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ne(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?ze(n.\u0275loadImpl()):G(null)).pipe(Je(()=>new j(o=>{let a=n.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((l,f)=>a.setRequestHeader(l,f.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let l=r.detectContentTypeHeader();l!==null&&a.setRequestHeader("Content-Type",l)}if(r.responseType){let l=r.responseType.toLowerCase();a.responseType=l!=="json"?l:"text"}let c=r.serializeBody(),u=null,d=()=>{if(u!==null)return u;let l=a.statusText||"OK",f=new N(a.getAllResponseHeaders()),w=Bt(a)||r.url;return u=new Fe({headers:f,status:a.status,statusText:l,url:w}),u},m=()=>{let{headers:l,status:f,statusText:w,url:M}=d(),S=null;f!==204&&(S=typeof a.response>"u"?a.responseText:a.response),f===0&&(f=S?200:0);let C=f>=200&&f<300;if(r.responseType==="json"&&typeof S=="string"){let X=S;S=S.replace(Ht,"");try{S=S!==""?JSON.parse(S):null}catch(me){S=X,C&&(C=!1,S={error:me,text:S})}}C?(o.next(new ue({body:S,headers:l,status:f,statusText:w,url:M||void 0})),o.complete()):o.error(new ce({error:S,headers:l,status:f,statusText:w,url:M||void 0}))},v=l=>{let{url:f}=d(),w=new ce({error:l,status:a.status||0,statusText:a.statusText||"Unknown Error",url:f||void 0});o.error(w)},b=!1,O=l=>{b||(o.next(d()),b=!0);let f={type:K.DownloadProgress,loaded:l.loaded};l.lengthComputable&&(f.total=l.total),r.responseType==="text"&&a.responseText&&(f.partialText=a.responseText),o.next(f)},g=l=>{let f={type:K.UploadProgress,loaded:l.loaded};l.lengthComputable&&(f.total=l.total),o.next(f)};return a.addEventListener("load",m),a.addEventListener("error",v),a.addEventListener("timeout",v),a.addEventListener("abort",v),r.reportProgress&&(a.addEventListener("progress",O),c!==null&&a.upload&&a.upload.addEventListener("progress",g)),a.send(c),o.next({type:K.Sent}),()=>{a.removeEventListener("error",v),a.removeEventListener("abort",v),a.removeEventListener("load",m),a.removeEventListener("timeout",v),r.reportProgress&&(a.removeEventListener("progress",O),c!==null&&a.upload&&a.upload.removeEventListener("progress",g)),a.readyState!==a.DONE&&a.abort()}})))}};t.\u0275fac=function(n){return new(n||t)(A(st))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})(),lt=new R("XSRF_ENABLED"),zt="XSRF-TOKEN",$t=new R("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>zt}),Vt="X-XSRF-TOKEN",Xt=new R("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>Vt}),he=class{},Gt=(()=>{let t=class t{constructor(r,n,i){this.doc=r,this.platform=n,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=et(r,this.cookieName),this.lastCookieString=r),this.lastToken}};t.\u0275fac=function(n){return new(n||t)(A(Ze),A(ie),A($t))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();function Jt(e,t){let s=e.url.toLowerCase();if(!E(lt)||e.method==="GET"||e.method==="HEAD"||s.startsWith("http://")||s.startsWith("https://"))return t(e);let r=E(he).getToken(),n=E(Xt);return r!=null&&!e.headers.has(n)&&(e=e.clone({headers:e.headers.set(n,r)})),t(e)}function As(...e){let t=[De,ut,at,{provide:Z,useExisting:at},{provide:ae,useExisting:ut},{provide:ht,useValue:Jt,multi:!0},{provide:lt,useValue:!0},{provide:he,useClass:Gt}];for(let s of e)t.push(...s.\u0275providers);return Oe(t)}var F=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};var D=typeof window>"u"||"Deno"in window;function P(){}function pt(e,t){return typeof e=="function"?e(t):e}function te(e){return typeof e=="number"&&e>=0&&e!==1/0}function le(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ae(e,t){let{type:s="all",exact:r,fetchStatus:n,predicate:i,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==se(o,t.options))return!1}else if(!B(t.queryKey,o))return!1}if(s!=="all"){let c=t.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||typeof n<"u"&&n!==t.state.fetchStatus||i&&!i(t))}function xe(e,t){let{exact:s,status:r,predicate:n,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(H(t.options.mutationKey)!==H(i))return!1}else if(!B(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function se(e,t){return(t?.queryKeyHashFn||H)(e)}function H(e){return JSON.stringify(e,(t,s)=>Ie(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function B(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(s=>!B(e[s],t[s])):!1}function yt(e,t){if(e===t)return e;let s=dt(e)&&dt(t);if(s||Ie(e)&&Ie(t)){let r=s?e.length:Object.keys(e).length,n=s?t:Object.keys(t),i=n.length,o=s?[]:{},a=0;for(let c=0;c<i;c++){let u=s?c:n[c];o[u]=yt(e[u],t[u]),o[u]===e[u]&&a++}return r===i&&a===r?e:o}return t}function z(e,t){if(e&&!t||t&&!e)return!1;for(let s in e)if(e[s]!==t[s])return!1;return!0}function dt(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ie(e){if(!ft(e))return!1;let t=e.constructor;if(typeof t>"u")return!0;let s=t.prototype;return!(!ft(s)||!s.hasOwnProperty("isPrototypeOf"))}function ft(e){return Object.prototype.toString.call(e)==="[object Object]"}function je(e){return new Promise(t=>{setTimeout(t,e)})}function ke(e){je(0).then(e)}function re(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?yt(e,t):t}function mt(e,t,s=0){let r=[...e,t];return s&&r.length>s?r.slice(1):r}function gt(e,t,s=0){let r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var Wt=class extends F{#e;#t;#s;constructor(){super(),this.#s=e=>{if(!D&&window.addEventListener){let t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},U=new Wt;var _t=class extends F{#e=!0;#t;#s;constructor(){super(),this.#s=e=>{if(!D&&window.addEventListener){let t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},$=new _t;function Yt(e){return Math.min(1e3*2**e,3e4)}function L(e){return(e??"online")==="online"?$.isOnline():!0}var vt=class{constructor(e){this.revert=e?.revert,this.silent=e?.silent}};function de(e){return e instanceof vt}function fe(e){let t=!1,s=0,r=!1,n,i,o,a=new Promise((l,f)=>{i=l,o=f}),c=l=>{r||(b(new vt(l)),e.abort?.())},u=()=>{t=!0},d=()=>{t=!1},m=()=>!U.isFocused()||e.networkMode!=="always"&&!$.isOnline(),v=l=>{r||(r=!0,e.onSuccess?.(l),n?.(),i(l))},b=l=>{r||(r=!0,e.onError?.(l),n?.(),o(l))},O=()=>new Promise(l=>{n=f=>{let w=r||!m();return w&&l(f),w},e.onPause?.()}).then(()=>{n=void 0,r||e.onContinue?.()}),g=()=>{if(r)return;let l;try{l=e.fn()}catch(f){l=Promise.reject(f)}Promise.resolve(l).then(v).catch(f=>{if(r)return;let w=e.retry??(D?0:3),M=e.retryDelay??Yt,S=typeof M=="function"?M(s,f):M,C=w===!0||typeof w=="number"&&s<w||typeof w=="function"&&w(s,f);if(t||!C){b(f);return}s++,e.onFail?.(s,f),je(S).then(()=>{if(m())return O()}).then(()=>{t?b(f):g()})})};return L(e.networkMode)?g():O().then(g),{promise:a,cancel:c,continue:()=>n?.()?a:Promise.resolve(),cancelRetry:u,continueRetry:d}}function Zt(){let e=[],t=0,s=d=>{d()},r=d=>{d()},n=d=>{let m;t++;try{m=d()}finally{t--,t||a()}return m},i=d=>{t?e.push(d):ke(()=>{s(d)})},o=d=>(...m)=>{i(()=>{d(...m)})},a=()=>{let d=e;e=[],d.length&&ke(()=>{r(()=>{d.forEach(m=>{s(m)})})})};return{batch:n,batchCalls:o,schedule:i,setNotifyFunction:d=>{s=d},setBatchNotifyFunction:d=>{r=d}}}var y=Zt();var pe=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),te(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(D?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}};var bt=class extends pe{constructor(e){super(),this.#u=!1,this.#o=e.defaultOptions,this.#c(e.options),this.#i=[],this.#s=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=e.state||es(this.options),this.state=this.#e,this.scheduleGc()}#e;#t;#s;#r;#n;#i;#o;#u;get meta(){return this.options.meta}#c(e){this.options=h(h({},this.#o),e),this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.#i.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(e,t){let s=re(this.state.data,e,this.options);return this.#a({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){let t=this.#r;return this.#n?.cancel(e),t?t.then(P).catch(P):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.#i.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.#i.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!le(this.state.dataUpdatedAt,e)}onFocus(){this.#i.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.#i.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.#i.includes(e)||(this.#i.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.#i.includes(e)&&(this.#i=this.#i.filter(t=>t!==e),this.#i.length||(this.#n&&(this.#u?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.#i.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#n?.continueRetry(),this.#r}if(e&&this.#c(e),!this.options.queryFn){let c=this.#i.find(u=>u.options.queryFn);c&&this.#c(c.options)}let s=new AbortController,r={queryKey:this.queryKey,meta:this.meta},n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#u=!0,s.signal)})};n(r);let i=()=>this.options.queryFn?(this.#u=!1,this.options.persister?this.options.persister(this.options.queryFn,r,this):this.options.queryFn(r)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};n(o),this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta});let a=c=>{de(c)&&c.silent||this.#a({type:"error",error:c}),de(c)||(this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.#n=fe({fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:c=>{if(typeof c>"u"){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(c),this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(c,u)=>{this.#a({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode}),this.#r=this.#n.promise,this.#r}#a(e){let t=s=>{switch(e.type){case"failed":return p(h({},s),{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return p(h({},s),{fetchStatus:"paused"});case"continue":return p(h({},s),{fetchStatus:"fetching"});case"fetch":return h(p(h({},s),{fetchFailureCount:0,fetchFailureReason:null,fetchMeta:e.meta??null,fetchStatus:L(this.options.networkMode)?"fetching":"paused"}),!s.dataUpdatedAt&&{error:null,status:"pending"});case"success":return h(p(h({},s),{data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success"}),!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":let r=e.error;return de(r)&&r.revert&&this.#t?p(h({},this.#t),{fetchStatus:"idle"}):p(h({},s),{error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"});case"invalidate":return p(h({},s),{isInvalidated:!0});case"setState":return h(h({},s),e.state)}};this.state=t(this.state),y.batch(()=>{this.#i.forEach(s=>{s.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:e})})}};function es(e){let t=typeof e.initialData=="function"?e.initialData():e.initialData,s=typeof t<"u",r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var wt=class extends F{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,s){let r=t.queryKey,n=t.queryHash??se(r,t),i=this.get(n);return i||(i=new bt({cache:this,queryKey:r,queryHash:n,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){y.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t=h({exact:!0},e);return this.getAll().find(s=>Ae(t,s))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(s=>Ae(e,s)):t}notify(e){y.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){y.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){y.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}};var Ot=class extends pe{constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.defaultOptions,this.#s=e.mutationCache,this.#e=[],this.state=e.state||Ne(),this.setOptions(e.options),this.scheduleGc()}#e;#t;#s;#r;setOptions(e){this.options=h(h({},this.#t),e),this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}execute(e){return q(this,null,function*(){let t=()=>(this.#r=fe({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(r,n)=>{this.#n({type:"failed",failureCount:r,error:n})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.#r.promise),s=this.state.status==="pending";try{if(!s){this.#n({type:"pending",variables:e}),yield this.#s.config.onMutate?.(e,this);let n=yield this.options.onMutate?.(e);n!==this.state.context&&this.#n({type:"pending",context:n,variables:e})}let r=yield t();return yield this.#s.config.onSuccess?.(r,e,this.state.context,this),yield this.options.onSuccess?.(r,e,this.state.context),yield this.#s.config.onSettled?.(r,null,this.state.variables,this.state.context,this),yield this.options.onSettled?.(r,null,e,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw yield this.#s.config.onError?.(r,e,this.state.context,this),yield this.options.onError?.(r,e,this.state.context),yield this.#s.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),yield this.options.onSettled?.(void 0,r,e,this.state.context),r}finally{this.#n({type:"error",error:r})}}})}#n(e){let t=s=>{switch(e.type){case"failed":return p(h({},s),{failureCount:e.failureCount,failureReason:e.error});case"pause":return p(h({},s),{isPaused:!0});case"continue":return p(h({},s),{isPaused:!1});case"pending":return p(h({},s),{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!L(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return p(h({},s),{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return p(h({},s),{data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}};this.state=t(this.state),y.batch(()=>{this.#e.forEach(s=>{s.onMutationUpdate(e)}),this.#s.notify({mutation:this,type:"updated",action:e})})}};function Ne(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var St=class extends F{constructor(e={}){super(),this.config=e,this.#e=[],this.#t=0}#e;#t;#s;build(e,t,s){let r=new Ot({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){this.#e.push(e),this.notify({type:"added",mutation:e})}remove(e){this.#e=this.#e.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){y.batch(()=>{this.#e.forEach(e=>{this.remove(e)})})}getAll(){return this.#e}find(e){let t=h({exact:!0},e);return this.#e.find(s=>xe(t,s))}findAll(e={}){return this.#e.filter(t=>xe(e,t))}notify(e){y.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){return this.#s=(this.#s??Promise.resolve()).then(()=>{let e=this.#e.filter(t=>t.state.isPaused);return y.batch(()=>e.reduce((t,s)=>t.then(()=>s.continue().catch(P)),Promise.resolve()))}).then(()=>{this.#s=void 0}),this.#s}};function Ct(e){return{onFetch:(t,s)=>{let r=()=>q(this,null,function*(){let n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],a=t.state.data?.pageParams||[],c={pages:[],pageParams:[]},u=!1,d=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},m=t.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${t.options.queryHash}'`))),v=(O,g,l)=>q(this,null,function*(){if(u)return Promise.reject();if(g==null&&O.pages.length)return Promise.resolve(O);let f={queryKey:t.queryKey,pageParam:g,direction:l?"backward":"forward",meta:t.options.meta};d(f);let w=yield m(f),{maxPages:M}=t.options,S=l?gt:mt;return{pages:S(O.pages,w,M),pageParams:S(O.pageParams,g,M)}}),b;if(i&&o.length){let O=i==="backward",g=O?ts:Et,l={pages:o,pageParams:a},f=g(n,l);b=yield v(l,f,O)}else{b=yield v(c,a[0]??n.initialPageParam);let O=e??o.length;for(let g=1;g<O;g++){let l=Et(n,b);b=yield v(b,l)}}return b});t.options.persister?t.fetchFn=()=>t.options.persister?.(r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=r}}}function Et(e,{pages:t,pageParams:s}){let r=t.length-1;return e.getNextPageParam(t[r],t,s[r],s)}function ts(e,{pages:t,pageParams:s}){return e.getPreviousPageParam?.(t[0],t,s[0],s)}var Ue=class{#e;#t;#s;#r;#n;#i;#o;#u;constructor(e={}){this.#e=e.queryCache||new wt,this.#t=e.mutationCache||new St,this.#s=e.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=U.subscribe(()=>{U.isFocused()&&(this.resumePausedMutations(),this.#e.onFocus())}),this.#u=$.subscribe(()=>{$.isOnline()&&(this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#u?.(),this.#u=void 0)}isFetching(e){return this.#e.findAll(p(h({},e),{fetchStatus:"fetching"})).length}isMutating(e){return this.#t.findAll(p(h({},e),{status:"pending"})).length}getQueryData(e){return this.#e.find({queryKey:e})?.state.data}ensureQueryData(e){let t=this.getQueryData(e.queryKey);return t!==void 0?Promise.resolve(t):this.fetchQuery(e)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:t,state:s})=>{let r=s.data;return[t,r]})}setQueryData(e,t,s){let n=this.#e.find({queryKey:e})?.state.data,i=pt(t,n);if(typeof i>"u")return;let o=this.defaultQueryOptions({queryKey:e});return this.#e.build(this,o).setData(i,p(h({},s),{manual:!0}))}setQueriesData(e,t,s){return y.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){return this.#e.find({queryKey:e})?.state}removeQueries(e){let t=this.#e;y.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){let s=this.#e,r=h({type:"active"},e);return y.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){let s=h({revert:!0},t),r=y.batch(()=>this.#e.findAll(e).map(n=>n.cancel(s)));return Promise.all(r).then(P).catch(P)}invalidateQueries(e={},t={}){return y.batch(()=>{if(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();let s=p(h({},e),{type:e.refetchType??e.type??"active"});return this.refetchQueries(s,t)})}refetchQueries(e={},t){let s=p(h({},t),{cancelRefetch:t?.cancelRefetch??!0}),r=y.batch(()=>this.#e.findAll(e).filter(n=>!n.isDisabled()).map(n=>{let i=n.fetch(void 0,s);return s.throwOnError||(i=i.catch(P)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(P)}fetchQuery(e){let t=this.defaultQueryOptions(e);typeof t.retry>"u"&&(t.retry=!1);let s=this.#e.build(this,t);return s.isStaleByTime(t.staleTime)?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(P).catch(P)}fetchInfiniteQuery(e){return e.behavior=Ct(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(P).catch(P)}resumePausedMutations(){return this.#t.resumePausedMutations()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#r.set(H(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#r.values()],s={};return t.forEach(r=>{B(e,r.queryKey)&&(s=h(h({},s),r.defaultOptions))}),s}setMutationDefaults(e,t){this.#n.set(H(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#n.values()],s={};return t.forEach(r=>{B(e,r.mutationKey)&&(s=h(h({},s),r.defaultOptions))}),s}defaultQueryOptions(e){if(e?._defaulted)return e;let t=p(h(h(h({},this.#s.queries),e?.queryKey&&this.getQueryDefaults(e.queryKey)),e),{_defaulted:!0});return t.queryHash||(t.queryHash=se(t.queryKey,t)),typeof t.refetchOnReconnect>"u"&&(t.refetchOnReconnect=t.networkMode!=="always"),typeof t.throwOnError>"u"&&(t.throwOnError=!!t.suspense),typeof t.networkMode>"u"&&t.persister&&(t.networkMode="offlineFirst"),t}defaultMutationOptions(e){return e?._defaulted?e:p(h(h(h({},this.#s.mutations),e?.mutationKey&&this.getMutationDefaults(e.mutationKey)),e),{_defaulted:!0})}clear(){this.#e.clear(),this.#t.clear()}};var Qe=class extends F{constructor(e,t){super(),this.#t=void 0,this.#s=void 0,this.#r=void 0,this.#f=new Set,this.#e=e,this.options=t,this.#o=null,this.bindMethods(),this.setOptions(t)}#e;#t;#s;#r;#n;#i;#o;#u;#c;#a;#l;#d;#h;#f;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Pt(this.#t,this.options)?this.#p():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Le(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Le(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(e,t){let s=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),z(s,this.options)||this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),this.#O();let n=this.hasListeners();n&&Rt(this.#t,r,this.options,s)&&this.#p(),this.updateResult(t),n&&(this.#t!==r||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&this.#y();let i=this.#m();n&&(this.#t!==r||this.options.enabled!==s.enabled||i!==this.#h)&&this.#g(i)}getOptimisticResult(e){let t=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(t,e);return rs(this,s)&&(this.#r=s,this.#i=this.options,this.#n=this.#t.state),s}getCurrentResult(){return this.#r}trackResult(e){let t={};return Object.keys(e).forEach(s=>{Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:()=>(this.#f.add(s),e[s])})}),t}getCurrentQuery(){return this.#t}refetch(t={}){var e=ge(t,[]);return this.fetch(h({},e))}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,t);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#p(p(h({},e),{cancelRefetch:e.cancelRefetch??!0})).then(()=>(this.updateResult(),this.#r))}#p(e){this.#O();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(P)),t}#y(){if(this.#b(),D||this.#r.isStale||!te(this.options.staleTime))return;let t=le(this.#r.dataUpdatedAt,this.options.staleTime)+1;this.#l=setTimeout(()=>{this.#r.isStale||this.updateResult()},t)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#g(e){this.#w(),this.#h=e,!(D||this.options.enabled===!1||!te(this.#h)||this.#h===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||U.isFocused())&&this.#p()},this.#h))}#v(){this.#y(),this.#g(this.#m())}#b(){this.#l&&(clearTimeout(this.#l),this.#l=void 0)}#w(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,t){let s=this.#t,r=this.options,n=this.#r,i=this.#n,o=this.#i,c=e!==s?e.state:this.#s,{state:u}=e,{error:d,errorUpdatedAt:m,fetchStatus:v,status:b}=u,O=!1,g;if(t._optimisticResults){let C=this.hasListeners(),X=!C&&Pt(e,t),me=C&&Rt(e,s,t,r);(X||me)&&(v=L(e.options.networkMode)?"fetching":"paused",u.dataUpdatedAt||(b="pending")),t._optimisticResults==="isRestoring"&&(v="idle")}if(t.select&&typeof u.data<"u")if(n&&u.data===i?.data&&t.select===this.#u)g=this.#c;else try{this.#u=t.select,g=t.select(u.data),g=re(n?.data,g,t),this.#c=g,this.#o=null}catch(C){this.#o=C}else g=u.data;if(typeof t.placeholderData<"u"&&typeof g>"u"&&b==="pending"){let C;if(n?.isPlaceholderData&&t.placeholderData===o?.placeholderData)C=n.data;else if(C=typeof t.placeholderData=="function"?t.placeholderData(this.#a?.state.data,this.#a):t.placeholderData,t.select&&typeof C<"u")try{C=t.select(C),this.#o=null}catch(X){this.#o=X}typeof C<"u"&&(b="success",g=re(n?.data,C,t),O=!0)}this.#o&&(d=this.#o,g=this.#c,m=Date.now(),b="error");let l=v==="fetching",f=b==="pending",w=b==="error",M=f&&l;return{status:b,fetchStatus:v,isPending:f,isSuccess:b==="success",isError:w,isInitialLoading:M,isLoading:M,data:g,dataUpdatedAt:u.dataUpdatedAt,error:d,errorUpdatedAt:m,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:l,isRefetching:l&&!f,isLoadingError:w&&u.dataUpdatedAt===0,isPaused:v==="paused",isPlaceholderData:O,isRefetchError:w&&u.dataUpdatedAt!==0,isStale:qe(e,t),refetch:this.refetch}}updateResult(e){let t=this.#r,s=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#a=this.#t),z(s,t))return;this.#r=s;let r={},n=()=>{if(!t)return!0;let{notifyOnChangeProps:i}=this.options,o=typeof i=="function"?i():i;if(o==="all"||!o&&!this.#f.size)return!0;let a=new Set(o??this.#f);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(c=>{let u=c;return this.#r[u]!==t[u]&&a.has(u)})};e?.listeners!==!1&&n()&&(r.listeners=!0),this.#S(h(h({},r),e))}#O(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;let t=this.#t;this.#t=e,this.#s=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(e){y.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function ss(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Pt(e,t){return ss(e,t)||e.state.dataUpdatedAt>0&&Le(e,t,t.refetchOnMount)}function Le(e,t,s){if(t.enabled!==!1){let r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&qe(e,t)}return!1}function Rt(e,t,s,r){return s.enabled!==!1&&(e!==t||r.enabled===!1)&&(!s.suspense||e.state.status!=="error")&&qe(e,s)}function qe(e,t){return e.isStaleByTime(t.staleTime)}function rs(e,t){return!z(e.getCurrentResult(),t)}var Ke=class extends F{constructor(e,t){super(),this.#t=void 0,this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}#e;#t;#s;#r;bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),z(t,this.options)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),this.#s?.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#n(){let e=this.#s?.state??Ne();this.#t=p(h({},e),{isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})}#i(e){y.batch(()=>{this.#r&&this.hasListeners()&&(e?.type==="success"?(this.#r.onSuccess?.(e.data,this.#t.variables,this.#t.context),this.#r.onSettled?.(e.data,null,this.#t.variables,this.#t.context)):e?.type==="error"&&(this.#r.onError?.(e.error,this.#t.variables,this.#t.context),this.#r.onSettled?.(void 0,e.error,this.#t.variables,this.#t.context))),this.listeners.forEach(t=>{t(this.#t)})})}};function V(e,t){let s=!t?.manualCleanup;s&&!t?.injector&&_(V);let r=s?t?.injector?.get(Pe)??E(Pe):null,n;t?.requireSync?n=Ce({kind:0}):n=Ce({kind:1,value:t?.initialValue});let i=e.subscribe({next:o=>n.set({kind:1,value:o}),error:o=>{if(t?.rejectErrors)throw o;n.set({kind:2,error:o})}});return r?.onDestroy(i.unsubscribe.bind(i)),Ee(()=>{let o=n();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new ne(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var ns=new R("QUERY_CLIENT_OPTIONS",{providedIn:"root",factory(){return{}}});var Ft=new R("QueryClient",{providedIn:"root",factory(){return new Ue(E(ns))}}),is=(()=>{let t=class t{constructor(){this.instance=E(Ft),this.instance.mount()}ngOnDestroy(){this.instance.unmount()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),os=new R("QueryClientService",{providedIn:"root",factory(){return tt(E(ie))&&E(is),E(Ft)}});function ye(){return E(os)}function Dt({source:e,signal:t}){let s=new Be;return t&&t.addEventListener("abort",()=>{s.next(),s.complete()}),$e(e.pipe(t?We(s):r=>r))}function as({client:e,Observer:t,options:s,injector:r}){let n,i=Tt(e,s,r),o=new j(u=>{n||(n=new t(e,i)),u.next(n.getOptimisticResult(i));let d=n.subscribe(y.batchCalls(m=>{u.next(i.notifyOnChangeProps?m:n?.trackResult(m))}));return()=>{d(),n=void 0}}).pipe(J({bufferSize:1,refCount:!0})),a,c=r&&r._tNode;return{result$:o,updateOptions:u=>{if(n){let d=Tt(e,h(h({},s),u),r);n.setOptions(d,{listeners:!1})}},get result(){return!c&&_(function(){}),a||(a=V(this.result$,{requireSync:!0,injector:c?r:void 0})),a}}}function Tt(e,t,s){let r=e.defaultQueryOptions(t);r._optimisticResults="optimistic";let n=r.queryFn;return n&&(r.queryFn=function(i){let o=this;return W(s,()=>{let a=n.call(o,i);return ve(a)?Dt({source:a,signal:i.signal}):a})}),r}var Mt=(()=>{var t,s;let r=class r{constructor(){Q(this,t,ye());Q(this,s,E(Se))}use(i){return as({client:I(this,t),injector:i.injector??I(this,s),Observer:Qe,options:i})}};t=new WeakMap,s=new WeakMap,r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=T({token:r,factory:r.\u0275fac,providedIn:"root"});let e=r;return e})();function He(e){if(e?.injector)return W(e.injector,()=>{let s=E(Mt);return s.use.bind(s)});_(He);let t=E(Mt);return t.use.bind(t)}var us=(()=>{var t;let s=class s{constructor(){Q(this,t,ye())}use(n){let i=new Ke(I(this,t),p(h({},n),{mutationFn:u=>{let d=n.mutationFn(u);return ve(d)?Dt({source:d}):d}})),o=new j(u=>{u.next(i.getCurrentResult());let d=i.subscribe(y.batchCalls(m=>u.next(m)));return()=>d()}).pipe(J({bufferSize:1,refCount:!0})),a=(u,d)=>{i.mutate(u,d).catch(()=>{})},c;return{mutate:a,mutateAsync:i.mutate.bind(i),reset:i.reset.bind(i),setOptions:i.setOptions.bind(i),result$:o,get result(){return c||(c=V(this.result$,{requireSync:!0})),c}}}};t=new WeakMap,s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=T({token:s,factory:s.\u0275fac,providedIn:"root"});let e=s;return e})(),Cn=new R("UseMutation",{providedIn:"root",factory(){let e=new us;return e.use.bind(e)}});var cs=(()=>{var t;let s=class s{constructor(){Q(this,t,ye())}use(n){let i=new j(o=>{o.next(I(this,t).isFetching(n));let a=I(this,t).getQueryCache().subscribe(y.batchCalls(()=>{o.next(I(this,t).isFetching(n))}));return()=>a()}).pipe(we());return{result$:i,toSignal:()=>V(i)}}};t=new WeakMap,s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=T({token:s,factory:s.\u0275fac,providedIn:"root"});let e=s;return e})(),Pn=new R("UseIsFetching",{providedIn:"root",factory(){let e=new cs;return e.use.bind(e)}});var hs=(()=>{var t;let s=class s{constructor(){Q(this,t,ye())}use(n){let i=new j(o=>{o.next(I(this,t).isMutating(n));let a=I(this,t).getMutationCache().subscribe(y.batchCalls(()=>{o.next(I(this,t).isMutating(n))}));return()=>a()}).pipe(we());return{result$:i,toSignal:()=>V(i)}}};t=new WeakMap,s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=T({token:s,factory:s.\u0275fac,providedIn:"root"});let e=s;return e})(),Rn=new R("UseIsFetching",{providedIn:"root",factory(){let e=new hs;return e.use.bind(e)}});function Tn(e){return k(t=>{let s=Array.isArray(t),r=s?t:Object.values(t),n={all:t,isSuccess:r.every(i=>i.isSuccess),isPending:r.some(i=>i.isPending),isLoading:r.some(i=>i.isLoading),isError:r.some(i=>i.isError),isFetching:r.some(i=>i.isFetching),error:r.find(i=>i.isError)?.error,data:void 0};if(n.isSuccess)if(s)n.data=e(r.map(i=>i.data));else{let i=Object.entries(t).reduce((o,[a,c])=>(o[a]=c.data,o),{});n.data=e(i)}return n})}var It="https://fakestoreapi.com/products",Nn=(()=>{let t=class t{constructor(){this.httpClient=E(De),this.query=He()}getProducts(){return this.query({queryKey:["products"],queryFn:()=>this.httpClient.get(It).pipe(J(1))})}getProduct(r){return this.query({queryKey:["products",r],queryFn:()=>this.httpClient.get(`${It}/${r}`).pipe(Ve(n=>(console.error(n),G(void 0))))})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();export{As as a,Tn as b,Nn as c};
