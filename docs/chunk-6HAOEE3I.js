import{A as we,B as Xe,C as Je,Ea as Re,Eb as st,G as Oe,Gb as rt,H as We,M as Se,O as re,P as _e,S as ne,T,X as R,Y as x,Z as E,a as h,b as p,c as be,d as I,e as Q,f as q,ha as Ee,i as k,ja as Ye,ka as J,l as ze,la as W,lb as Ze,ma as Ce,o as $e,p as X,qa as ie,r as ve,t as Ve,u as A,wb as et,ya as oe,z as Ge,za as Pe,zb as tt}from"./chunk-JJZI2TCJ.js";var Y=class{},ue=class{},N=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(s=>{let r=s.indexOf(":");if(r>0){let n=s.slice(0,r),i=n.toLowerCase(),o=s.slice(r+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(o):this.headers.set(i,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((s,r)=>{this.setHeaderEntries(r,s)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([s,r])=>{this.setHeaderEntries(s,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let s=this.headers.get(t.toLowerCase());return s&&s.length>0?s[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,s){return this.clone({name:t,value:s,op:"a"})}set(t,s){return this.clone({name:t,value:s,op:"s"})}delete(t,s){return this.clone({name:t,value:s,op:"d"})}maybeSetNormalizedName(t,s){this.normalizedNames.has(s)||this.normalizedNames.set(s,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(s=>{this.headers.set(s,t.headers.get(s)),this.normalizedNames.set(s,t.normalizedNames.get(s))})}clone(t){let s=new e;return s.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,s.lazyUpdate=(this.lazyUpdate||[]).concat([t]),s}applyUpdate(t){let s=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,s);let n=(t.op==="a"?this.headers.get(s):void 0)||[];n.push(...r),this.headers.set(s,n);break;case"d":let i=t.value;if(!i)this.headers.delete(s),this.normalizedNames.delete(s);else{let o=this.headers.get(s);if(!o)return;o=o.filter(a=>i.indexOf(a)===-1),o.length===0?(this.headers.delete(s),this.normalizedNames.delete(s)):this.headers.set(s,o)}break}}setHeaderEntries(t,s){let r=(Array.isArray(s)?s:[s]).map(i=>i.toString()),n=t.toLowerCase();this.headers.set(n,r),this.maybeSetNormalizedName(t,n)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(s=>t(this.normalizedNames.get(s),this.headers.get(s)))}};var Me=class{encodeKey(t){return nt(t)}encodeValue(t){return nt(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function jt(e,t){let s=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(n=>{let i=n.indexOf("="),[o,a]=i==-1?[t.decodeKey(n),""]:[t.decodeKey(n.slice(0,i)),t.decodeValue(n.slice(i+1))],c=s.get(o)||[];c.push(a),s.set(o,c)}),s}var kt=/%(\d[a-f0-9])/gi,Nt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nt(e){return encodeURIComponent(e).replace(kt,(t,s)=>Nt[s]??t)}function ae(e){return`${e}`}var j=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Me,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=jt(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(s=>{let r=t.fromObject[s],n=Array.isArray(r)?r.map(ae):[ae(r)];this.map.set(s,n)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let s=this.map.get(t);return s?s[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,s){return this.clone({param:t,value:s,op:"a"})}appendAll(t){let s=[];return Object.keys(t).forEach(r=>{let n=t[r];Array.isArray(n)?n.forEach(i=>{s.push({param:r,value:i,op:"a"})}):s.push({param:r,value:n,op:"a"})}),this.clone(s)}set(t,s){return this.clone({param:t,value:s,op:"s"})}delete(t,s){return this.clone({param:t,value:s,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let s=this.encoder.encodeKey(t);return this.map.get(t).map(r=>s+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let s=new e({encoder:this.encoder});return s.cloneFrom=this.cloneFrom||this,s.updates=(this.updates||[]).concat(t),s}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let s=(t.op==="a"?this.map.get(t.param):void 0)||[];s.push(ae(t.value)),this.map.set(t.param,s);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],n=r.indexOf(ae(t.value));n!==-1&&r.splice(n,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Fe=class{constructor(){this.map=new Map}set(t,s){return this.map.set(t,s),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Ut(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function it(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function ot(e){return typeof Blob<"u"&&e instanceof Blob}function at(e){return typeof FormData<"u"&&e instanceof FormData}function Lt(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var _=class e{constructor(t,s,r,n){this.url=s,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let i;if(Ut(this.method)||n?(this.body=r!==void 0?r:null,i=n):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers||(this.headers=new N),this.context||(this.context=new Fe),!this.params)this.params=new j,this.urlWithParams=s;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=s;else{let a=s.indexOf("?"),c=a===-1?"?":a<s.length-1?"&":"";this.urlWithParams=s+c+o}}}serializeBody(){return this.body===null?null:it(this.body)||ot(this.body)||at(this.body)||Lt(this.body)||typeof this.body=="string"?this.body:this.body instanceof j?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||at(this.body)?null:ot(this.body)?this.body.type||null:it(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof j?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let s=t.method||this.method,r=t.url||this.url,n=t.responseType||this.responseType,i=t.body!==void 0?t.body:this.body,o=t.withCredentials!==void 0?t.withCredentials:this.withCredentials,a=t.reportProgress!==void 0?t.reportProgress:this.reportProgress,c=t.headers||this.headers,u=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((m,b)=>m.set(b,t.setHeaders[b]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((m,b)=>m.set(b,t.setParams[b]),u)),new e(s,r,i,{params:u,headers:c,context:d,reportProgress:a,responseType:n,withCredentials:o})}},K=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(K||{}),Z=class{constructor(t,s=200,r="OK"){this.headers=t.headers||new N,this.status=t.status!==void 0?t.status:s,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},De=class e extends Z{constructor(t={}){super(t),this.type=K.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ce=class e extends Z{constructor(t={}){super(t),this.type=K.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},he=class extends Z{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}};function Te(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Ie=(()=>{let t=class t{constructor(r){this.handler=r}request(r,n,i={}){let o;if(r instanceof _)o=r;else{let u;i.headers instanceof N?u=i.headers:u=new N(i.headers);let d;i.params&&(i.params instanceof j?d=i.params:d=new j({fromObject:i.params})),o=new _(r,n,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let a=X(o).pipe(Je(u=>this.handler.handle(u)));if(r instanceof _||i.observe==="events")return a;let c=a.pipe(we(u=>u instanceof ce));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(A(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(A(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(A(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(A(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(r,n={}){return this.request("DELETE",r,n)}get(r,n={}){return this.request("GET",r,n)}head(r,n={}){return this.request("HEAD",r,n)}jsonp(r,n){return this.request("JSONP",r,{params:new j().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,n={}){return this.request("OPTIONS",r,n)}patch(r,n,i={}){return this.request("PATCH",r,Te(i,n))}post(r,n,i={}){return this.request("POST",r,Te(i,n))}put(r,n,i={}){return this.request("PUT",r,Te(i,n))}};t.\u0275fac=function(n){return new(n||t)(x(Y))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();function Qt(e,t){return t(e)}function qt(e,t,s){return(r,n)=>J(s,()=>t(r,i=>e(i,n)))}var lt=new R(""),Kt=new R(""),Ht=new R("");var ut=(()=>{let t=class t extends Y{constructor(r,n){super(),this.backend=r,this.injector=n,this.chain=null,this.pendingTasks=E(Ze);let i=E(Ht,{optional:!0});this.backend=i??r}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(lt),...this.injector.get(Kt,[])]));this.chain=i.reduceRight((o,a)=>qt(o,a,this.injector),Qt)}let n=this.pendingTasks.add();return this.chain(r,i=>this.backend.handle(i)).pipe(We(()=>this.pendingTasks.remove(n)))}};t.\u0275fac=function(n){return new(n||t)(x(ue),x(Ye))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();var Bt=/^\)\]\}',?\n/;function zt(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var ct=(()=>{let t=class t{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ne(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?$e(n.\u0275loadImpl()):X(null)).pipe(re(()=>new k(o=>{let a=n.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((l,f)=>a.setRequestHeader(l,f.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let l=r.detectContentTypeHeader();l!==null&&a.setRequestHeader("Content-Type",l)}if(r.responseType){let l=r.responseType.toLowerCase();a.responseType=l!=="json"?l:"text"}let c=r.serializeBody(),u=null,d=()=>{if(u!==null)return u;let l=a.statusText||"OK",f=new N(a.getAllResponseHeaders()),w=zt(a)||r.url;return u=new De({headers:f,status:a.status,statusText:l,url:w}),u},m=()=>{let{headers:l,status:f,statusText:w,url:M}=d(),S=null;f!==204&&(S=typeof a.response>"u"?a.responseText:a.response),f===0&&(f=S?200:0);let C=f>=200&&f<300;if(r.responseType==="json"&&typeof S=="string"){let G=S;S=S.replace(Bt,"");try{S=S!==""?JSON.parse(S):null}catch(ge){S=G,C&&(C=!1,S={error:ge,text:S})}}C?(o.next(new ce({body:S,headers:l,status:f,statusText:w,url:M||void 0})),o.complete()):o.error(new he({error:S,headers:l,status:f,statusText:w,url:M||void 0}))},b=l=>{let{url:f}=d(),w=new he({error:l,status:a.status||0,statusText:a.statusText||"Unknown Error",url:f||void 0});o.error(w)},v=!1,O=l=>{v||(o.next(d()),v=!0);let f={type:K.DownloadProgress,loaded:l.loaded};l.lengthComputable&&(f.total=l.total),r.responseType==="text"&&a.responseText&&(f.partialText=a.responseText),o.next(f)},g=l=>{let f={type:K.UploadProgress,loaded:l.loaded};l.lengthComputable&&(f.total=l.total),o.next(f)};return a.addEventListener("load",m),a.addEventListener("error",b),a.addEventListener("timeout",b),a.addEventListener("abort",b),r.reportProgress&&(a.addEventListener("progress",O),c!==null&&a.upload&&a.upload.addEventListener("progress",g)),a.send(c),o.next({type:K.Sent}),()=>{a.removeEventListener("error",b),a.removeEventListener("abort",b),a.removeEventListener("load",m),a.removeEventListener("timeout",b),r.reportProgress&&(a.removeEventListener("progress",O),c!==null&&a.upload&&a.upload.removeEventListener("progress",g)),a.readyState!==a.DONE&&a.abort()}})))}};t.\u0275fac=function(n){return new(n||t)(x(rt))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})(),dt=new R("XSRF_ENABLED"),$t="XSRF-TOKEN",Vt=new R("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>$t}),Gt="X-XSRF-TOKEN",Xt=new R("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>Gt}),le=class{},Jt=(()=>{let t=class t{constructor(r,n,i){this.doc=r,this.platform=n,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=tt(r,this.cookieName),this.lastCookieString=r),this.lastToken}};t.\u0275fac=function(n){return new(n||t)(x(et),x(ie),x(Vt))},t.\u0275prov=T({token:t,factory:t.\u0275fac});let e=t;return e})();function Wt(e,t){let s=e.url.toLowerCase();if(!E(dt)||e.method==="GET"||e.method==="HEAD"||s.startsWith("http://")||s.startsWith("https://"))return t(e);let r=E(le).getToken(),n=E(Xt);return r!=null&&!e.headers.has(n)&&(e=e.clone({headers:e.headers.set(n,r)})),t(e)}function ks(...e){let t=[Ie,ct,ut,{provide:Y,useExisting:ut},{provide:ue,useExisting:ct},{provide:lt,useValue:Wt,multi:!0},{provide:dt,useValue:!0},{provide:le,useClass:Jt}];for(let s of e)t.push(...s.\u0275providers);return Ee(t)}var F=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};var D=typeof window>"u"||"Deno"in window;function P(){}function yt(e,t){return typeof e=="function"?e(t):e}function ee(e){return typeof e=="number"&&e>=0&&e!==1/0}function de(e,t){return Math.max(e+(t||0)-Date.now(),0)}function xe(e,t){let{type:s="all",exact:r,fetchStatus:n,predicate:i,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==te(o,t.options))return!1}else if(!B(t.queryKey,o))return!1}if(s!=="all"){let c=t.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||typeof n<"u"&&n!==t.state.fetchStatus||i&&!i(t))}function je(e,t){let{exact:s,status:r,predicate:n,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(H(t.options.mutationKey)!==H(i))return!1}else if(!B(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function te(e,t){return(t?.queryKeyHashFn||H)(e)}function H(e){return JSON.stringify(e,(t,s)=>Ae(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function B(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(s=>!B(e[s],t[s])):!1}function mt(e,t){if(e===t)return e;let s=ft(e)&&ft(t);if(s||Ae(e)&&Ae(t)){let r=s?e.length:Object.keys(e).length,n=s?t:Object.keys(t),i=n.length,o=s?[]:{},a=0;for(let c=0;c<i;c++){let u=s?c:n[c];o[u]=mt(e[u],t[u]),o[u]===e[u]&&a++}return r===i&&a===r?e:o}return t}function z(e,t){if(e&&!t||t&&!e)return!1;for(let s in e)if(e[s]!==t[s])return!1;return!0}function ft(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ae(e){if(!pt(e))return!1;let t=e.constructor;if(typeof t>"u")return!0;let s=t.prototype;return!(!pt(s)||!s.hasOwnProperty("isPrototypeOf"))}function pt(e){return Object.prototype.toString.call(e)==="[object Object]"}function ke(e){return new Promise(t=>{setTimeout(t,e)})}function Ne(e){ke(0).then(e)}function se(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?mt(e,t):t}function gt(e,t,s=0){let r=[...e,t];return s&&r.length>s?r.slice(1):r}function bt(e,t,s=0){let r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var _t=class extends F{#e;#t;#s;constructor(){super(),this.#s=e=>{if(!D&&window.addEventListener){let t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},U=new _t;var Yt=class extends F{#e=!0;#t;#s;constructor(){super(),this.#s=e=>{if(!D&&window.addEventListener){let t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#s=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(s=>{s(e)}))}isOnline(){return this.#e}},$=new Yt;function Zt(e){return Math.min(1e3*2**e,3e4)}function L(e){return(e??"online")==="online"?$.isOnline():!0}var vt=class{constructor(e){this.revert=e?.revert,this.silent=e?.silent}};function fe(e){return e instanceof vt}function pe(e){let t=!1,s=0,r=!1,n,i,o,a=new Promise((l,f)=>{i=l,o=f}),c=l=>{r||(v(new vt(l)),e.abort?.())},u=()=>{t=!0},d=()=>{t=!1},m=()=>!U.isFocused()||e.networkMode!=="always"&&!$.isOnline(),b=l=>{r||(r=!0,e.onSuccess?.(l),n?.(),i(l))},v=l=>{r||(r=!0,e.onError?.(l),n?.(),o(l))},O=()=>new Promise(l=>{n=f=>{let w=r||!m();return w&&l(f),w},e.onPause?.()}).then(()=>{n=void 0,r||e.onContinue?.()}),g=()=>{if(r)return;let l;try{l=e.fn()}catch(f){l=Promise.reject(f)}Promise.resolve(l).then(b).catch(f=>{if(r)return;let w=e.retry??(D?0:3),M=e.retryDelay??Zt,S=typeof M=="function"?M(s,f):M,C=w===!0||typeof w=="number"&&s<w||typeof w=="function"&&w(s,f);if(t||!C){v(f);return}s++,e.onFail?.(s,f),ke(S).then(()=>{if(m())return O()}).then(()=>{t?v(f):g()})})};return L(e.networkMode)?g():O().then(g),{promise:a,cancel:c,continue:()=>n?.()?a:Promise.resolve(),cancelRetry:u,continueRetry:d}}function es(){let e=[],t=0,s=d=>{d()},r=d=>{d()},n=d=>{let m;t++;try{m=d()}finally{t--,t||a()}return m},i=d=>{t?e.push(d):Ne(()=>{s(d)})},o=d=>(...m)=>{i(()=>{d(...m)})},a=()=>{let d=e;e=[],d.length&&Ne(()=>{r(()=>{d.forEach(m=>{s(m)})})})};return{batch:n,batchCalls:o,schedule:i,setNotifyFunction:d=>{s=d},setBatchNotifyFunction:d=>{r=d}}}var y=es();var ye=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ee(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(D?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}};var wt=class extends ye{constructor(e){super(),this.#u=!1,this.#o=e.defaultOptions,this.#c(e.options),this.#i=[],this.#s=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=e.state||ts(this.options),this.state=this.#e,this.scheduleGc()}#e;#t;#s;#r;#n;#i;#o;#u;get meta(){return this.options.meta}#c(e){this.options=h(h({},this.#o),e),this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.#i.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(e,t){let s=se(this.state.data,e,this.options);return this.#a({data:s,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),s}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){let t=this.#r;return this.#n?.cancel(e),t?t.then(P).catch(P):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.#i.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.#i.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!de(this.state.dataUpdatedAt,e)}onFocus(){this.#i.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.#i.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.#i.includes(e)||(this.#i.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.#i.includes(e)&&(this.#i=this.#i.filter(t=>t!==e),this.#i.length||(this.#n&&(this.#u?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.#i.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#n?.continueRetry(),this.#r}if(e&&this.#c(e),!this.options.queryFn){let c=this.#i.find(u=>u.options.queryFn);c&&this.#c(c.options)}let s=new AbortController,r={queryKey:this.queryKey,meta:this.meta},n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#u=!0,s.signal)})};n(r);let i=()=>this.options.queryFn?(this.#u=!1,this.options.persister?this.options.persister(this.options.queryFn,r,this):this.options.queryFn(r)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};n(o),this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta});let a=c=>{fe(c)&&c.silent||this.#a({type:"error",error:c}),fe(c)||(this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.#n=pe({fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:c=>{if(typeof c>"u"){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(c),this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(c,u)=>{this.#a({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode}),this.#r=this.#n.promise,this.#r}#a(e){let t=s=>{switch(e.type){case"failed":return p(h({},s),{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return p(h({},s),{fetchStatus:"paused"});case"continue":return p(h({},s),{fetchStatus:"fetching"});case"fetch":return h(p(h({},s),{fetchFailureCount:0,fetchFailureReason:null,fetchMeta:e.meta??null,fetchStatus:L(this.options.networkMode)?"fetching":"paused"}),!s.dataUpdatedAt&&{error:null,status:"pending"});case"success":return h(p(h({},s),{data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success"}),!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":let r=e.error;return fe(r)&&r.revert&&this.#t?p(h({},this.#t),{fetchStatus:"idle"}):p(h({},s),{error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"});case"invalidate":return p(h({},s),{isInvalidated:!0});case"setState":return h(h({},s),e.state)}};this.state=t(this.state),y.batch(()=>{this.#i.forEach(s=>{s.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:e})})}};function ts(e){let t=typeof e.initialData=="function"?e.initialData():e.initialData,s=typeof t<"u",r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Ot=class extends F{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,s){let r=t.queryKey,n=t.queryHash??te(r,t),i=this.get(n);return i||(i=new wt({cache:this,queryKey:r,queryHash:n,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){y.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t=h({exact:!0},e);return this.getAll().find(s=>xe(t,s))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(s=>xe(e,s)):t}notify(e){y.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){y.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){y.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}};var St=class extends ye{constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.defaultOptions,this.#s=e.mutationCache,this.#e=[],this.state=e.state||Ue(),this.setOptions(e.options),this.scheduleGc()}#e;#t;#s;#r;setOptions(e){this.options=h(h({},this.#t),e),this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}execute(e){return q(this,null,function*(){let t=()=>(this.#r=pe({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(r,n)=>{this.#n({type:"failed",failureCount:r,error:n})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.#r.promise),s=this.state.status==="pending";try{if(!s){this.#n({type:"pending",variables:e}),yield this.#s.config.onMutate?.(e,this);let n=yield this.options.onMutate?.(e);n!==this.state.context&&this.#n({type:"pending",context:n,variables:e})}let r=yield t();return yield this.#s.config.onSuccess?.(r,e,this.state.context,this),yield this.options.onSuccess?.(r,e,this.state.context),yield this.#s.config.onSettled?.(r,null,this.state.variables,this.state.context,this),yield this.options.onSettled?.(r,null,e,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw yield this.#s.config.onError?.(r,e,this.state.context,this),yield this.options.onError?.(r,e,this.state.context),yield this.#s.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),yield this.options.onSettled?.(void 0,r,e,this.state.context),r}finally{this.#n({type:"error",error:r})}}})}#n(e){let t=s=>{switch(e.type){case"failed":return p(h({},s),{failureCount:e.failureCount,failureReason:e.error});case"pause":return p(h({},s),{isPaused:!0});case"continue":return p(h({},s),{isPaused:!1});case"pending":return p(h({},s),{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!L(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return p(h({},s),{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return p(h({},s),{data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}};this.state=t(this.state),y.batch(()=>{this.#e.forEach(s=>{s.onMutationUpdate(e)}),this.#s.notify({mutation:this,type:"updated",action:e})})}};function Ue(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Et=class extends F{constructor(e={}){super(),this.config=e,this.#e=[],this.#t=0}#e;#t;#s;build(e,t,s){let r=new St({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){this.#e.push(e),this.notify({type:"added",mutation:e})}remove(e){this.#e=this.#e.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){y.batch(()=>{this.#e.forEach(e=>{this.remove(e)})})}getAll(){return this.#e}find(e){let t=h({exact:!0},e);return this.#e.find(s=>je(t,s))}findAll(e={}){return this.#e.filter(t=>je(e,t))}notify(e){y.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){return this.#s=(this.#s??Promise.resolve()).then(()=>{let e=this.#e.filter(t=>t.state.isPaused);return y.batch(()=>e.reduce((t,s)=>t.then(()=>s.continue().catch(P)),Promise.resolve()))}).then(()=>{this.#s=void 0}),this.#s}};function Pt(e){return{onFetch:(t,s)=>{let r=()=>q(this,null,function*(){let n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],a=t.state.data?.pageParams||[],c={pages:[],pageParams:[]},u=!1,d=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},m=t.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${t.options.queryHash}'`))),b=(O,g,l)=>q(this,null,function*(){if(u)return Promise.reject();if(g==null&&O.pages.length)return Promise.resolve(O);let f={queryKey:t.queryKey,pageParam:g,direction:l?"backward":"forward",meta:t.options.meta};d(f);let w=yield m(f),{maxPages:M}=t.options,S=l?bt:gt;return{pages:S(O.pages,w,M),pageParams:S(O.pageParams,g,M)}}),v;if(i&&o.length){let O=i==="backward",g=O?ss:Ct,l={pages:o,pageParams:a},f=g(n,l);v=yield b(l,f,O)}else{v=yield b(c,a[0]??n.initialPageParam);let O=e??o.length;for(let g=1;g<O;g++){let l=Ct(n,v);v=yield b(v,l)}}return v});t.options.persister?t.fetchFn=()=>t.options.persister?.(r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=r}}}function Ct(e,{pages:t,pageParams:s}){let r=t.length-1;return e.getNextPageParam(t[r],t,s[r],s)}function ss(e,{pages:t,pageParams:s}){return e.getPreviousPageParam?.(t[0],t,s[0],s)}var Le=class{#e;#t;#s;#r;#n;#i;#o;#u;constructor(e={}){this.#e=e.queryCache||new Ot,this.#t=e.mutationCache||new Et,this.#s=e.defaultOptions||{},this.#r=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=U.subscribe(()=>{U.isFocused()&&(this.resumePausedMutations(),this.#e.onFocus())}),this.#u=$.subscribe(()=>{$.isOnline()&&(this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#u?.(),this.#u=void 0)}isFetching(e){return this.#e.findAll(p(h({},e),{fetchStatus:"fetching"})).length}isMutating(e){return this.#t.findAll(p(h({},e),{status:"pending"})).length}getQueryData(e){return this.#e.find({queryKey:e})?.state.data}ensureQueryData(e){let t=this.getQueryData(e.queryKey);return t!==void 0?Promise.resolve(t):this.fetchQuery(e)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:t,state:s})=>{let r=s.data;return[t,r]})}setQueryData(e,t,s){let n=this.#e.find({queryKey:e})?.state.data,i=yt(t,n);if(typeof i>"u")return;let o=this.defaultQueryOptions({queryKey:e});return this.#e.build(this,o).setData(i,p(h({},s),{manual:!0}))}setQueriesData(e,t,s){return y.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){return this.#e.find({queryKey:e})?.state}removeQueries(e){let t=this.#e;y.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){let s=this.#e,r=h({type:"active"},e);return y.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){let s=h({revert:!0},t),r=y.batch(()=>this.#e.findAll(e).map(n=>n.cancel(s)));return Promise.all(r).then(P).catch(P)}invalidateQueries(e={},t={}){return y.batch(()=>{if(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();let s=p(h({},e),{type:e.refetchType??e.type??"active"});return this.refetchQueries(s,t)})}refetchQueries(e={},t){let s=p(h({},t),{cancelRefetch:t?.cancelRefetch??!0}),r=y.batch(()=>this.#e.findAll(e).filter(n=>!n.isDisabled()).map(n=>{let i=n.fetch(void 0,s);return s.throwOnError||(i=i.catch(P)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(P)}fetchQuery(e){let t=this.defaultQueryOptions(e);typeof t.retry>"u"&&(t.retry=!1);let s=this.#e.build(this,t);return s.isStaleByTime(t.staleTime)?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(P).catch(P)}fetchInfiniteQuery(e){return e.behavior=Pt(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(P).catch(P)}resumePausedMutations(){return this.#t.resumePausedMutations()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#r.set(H(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#r.values()],s={};return t.forEach(r=>{B(e,r.queryKey)&&(s=h(h({},s),r.defaultOptions))}),s}setMutationDefaults(e,t){this.#n.set(H(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#n.values()],s={};return t.forEach(r=>{B(e,r.mutationKey)&&(s=h(h({},s),r.defaultOptions))}),s}defaultQueryOptions(e){if(e?._defaulted)return e;let t=p(h(h(h({},this.#s.queries),e?.queryKey&&this.getQueryDefaults(e.queryKey)),e),{_defaulted:!0});return t.queryHash||(t.queryHash=te(t.queryKey,t)),typeof t.refetchOnReconnect>"u"&&(t.refetchOnReconnect=t.networkMode!=="always"),typeof t.throwOnError>"u"&&(t.throwOnError=!!t.suspense),typeof t.networkMode>"u"&&t.persister&&(t.networkMode="offlineFirst"),t}defaultMutationOptions(e){return e?._defaulted?e:p(h(h(h({},this.#s.mutations),e?.mutationKey&&this.getMutationDefaults(e.mutationKey)),e),{_defaulted:!0})}clear(){this.#e.clear(),this.#t.clear()}};var qe=class extends F{constructor(e,t){super(),this.#t=void 0,this.#s=void 0,this.#r=void 0,this.#f=new Set,this.#e=e,this.options=t,this.#o=null,this.bindMethods(),this.setOptions(t)}#e;#t;#s;#r;#n;#i;#o;#u;#c;#a;#l;#d;#h;#f;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Rt(this.#t,this.options)?this.#p():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Qe(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Qe(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#w(),this.#t.removeObserver(this)}setOptions(e,t){let s=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),z(s,this.options)||this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),this.#O();let n=this.hasListeners();n&&Tt(this.#t,r,this.options,s)&&this.#p(),this.updateResult(t),n&&(this.#t!==r||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&this.#y();let i=this.#m();n&&(this.#t!==r||this.options.enabled!==s.enabled||i!==this.#h)&&this.#g(i)}getOptimisticResult(e){let t=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(t,e);return ns(this,s)&&(this.#r=s,this.#i=this.options,this.#n=this.#t.state),s}getCurrentResult(){return this.#r}trackResult(e){let t={};return Object.keys(e).forEach(s=>{Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:()=>(this.#f.add(s),e[s])})}),t}getCurrentQuery(){return this.#t}refetch(t={}){var e=be(t,[]);return this.fetch(h({},e))}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,t);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#p(p(h({},e),{cancelRefetch:e.cancelRefetch??!0})).then(()=>(this.updateResult(),this.#r))}#p(e){this.#O();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(P)),t}#y(){if(this.#v(),D||this.#r.isStale||!ee(this.options.staleTime))return;let t=de(this.#r.dataUpdatedAt,this.options.staleTime)+1;this.#l=setTimeout(()=>{this.#r.isStale||this.updateResult()},t)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#g(e){this.#w(),this.#h=e,!(D||this.options.enabled===!1||!ee(this.#h)||this.#h===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||U.isFocused())&&this.#p()},this.#h))}#b(){this.#y(),this.#g(this.#m())}#v(){this.#l&&(clearTimeout(this.#l),this.#l=void 0)}#w(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,t){let s=this.#t,r=this.options,n=this.#r,i=this.#n,o=this.#i,c=e!==s?e.state:this.#s,{state:u}=e,{error:d,errorUpdatedAt:m,fetchStatus:b,status:v}=u,O=!1,g;if(t._optimisticResults){let C=this.hasListeners(),G=!C&&Rt(e,t),ge=C&&Tt(e,s,t,r);(G||ge)&&(b=L(e.options.networkMode)?"fetching":"paused",u.dataUpdatedAt||(v="pending")),t._optimisticResults==="isRestoring"&&(b="idle")}if(t.select&&typeof u.data<"u")if(n&&u.data===i?.data&&t.select===this.#u)g=this.#c;else try{this.#u=t.select,g=t.select(u.data),g=se(n?.data,g,t),this.#c=g,this.#o=null}catch(C){this.#o=C}else g=u.data;if(typeof t.placeholderData<"u"&&typeof g>"u"&&v==="pending"){let C;if(n?.isPlaceholderData&&t.placeholderData===o?.placeholderData)C=n.data;else if(C=typeof t.placeholderData=="function"?t.placeholderData(this.#a?.state.data,this.#a):t.placeholderData,t.select&&typeof C<"u")try{C=t.select(C),this.#o=null}catch(G){this.#o=G}typeof C<"u"&&(v="success",g=se(n?.data,C,t),O=!0)}this.#o&&(d=this.#o,g=this.#c,m=Date.now(),v="error");let l=b==="fetching",f=v==="pending",w=v==="error",M=f&&l;return{status:v,fetchStatus:b,isPending:f,isSuccess:v==="success",isError:w,isInitialLoading:M,isLoading:M,data:g,dataUpdatedAt:u.dataUpdatedAt,error:d,errorUpdatedAt:m,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:l,isRefetching:l&&!f,isLoadingError:w&&u.dataUpdatedAt===0,isPaused:b==="paused",isPlaceholderData:O,isRefetchError:w&&u.dataUpdatedAt!==0,isStale:Ke(e,t),refetch:this.refetch}}updateResult(e){let t=this.#r,s=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#a=this.#t),z(s,t))return;this.#r=s;let r={},n=()=>{if(!t)return!0;let{notifyOnChangeProps:i}=this.options,o=typeof i=="function"?i():i;if(o==="all"||!o&&!this.#f.size)return!0;let a=new Set(o??this.#f);return this.options.throwOnError&&a.add("error"),Object.keys(this.#r).some(c=>{let u=c;return this.#r[u]!==t[u]&&a.has(u)})};e?.listeners!==!1&&n()&&(r.listeners=!0),this.#S(h(h({},r),e))}#O(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;let t=this.#t;this.#t=e,this.#s=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#S(e){y.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function rs(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Rt(e,t){return rs(e,t)||e.state.dataUpdatedAt>0&&Qe(e,t,t.refetchOnMount)}function Qe(e,t,s){if(t.enabled!==!1){let r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&Ke(e,t)}return!1}function Tt(e,t,s,r){return s.enabled!==!1&&(e!==t||r.enabled===!1)&&(!s.suspense||e.state.status!=="error")&&Ke(e,s)}function Ke(e,t){return e.isStaleByTime(t.staleTime)}function ns(e,t){return!z(e.getCurrentResult(),t)}var He=class extends F{constructor(e,t){super(),this.#t=void 0,this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}#e;#t;#s;#r;bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),z(t,this.options)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),this.#s?.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#n(){let e=this.#s?.state??Ue();this.#t=p(h({},e),{isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})}#i(e){y.batch(()=>{this.#r&&this.hasListeners()&&(e?.type==="success"?(this.#r.onSuccess?.(e.data,this.#t.variables,this.#t.context),this.#r.onSettled?.(e.data,null,this.#t.variables,this.#t.context)):e?.type==="error"&&(this.#r.onError?.(e.error,this.#t.variables,this.#t.context),this.#r.onSettled?.(void 0,e.error,this.#t.variables,this.#t.context))),this.listeners.forEach(t=>{t(this.#t)})})}};function V(e,t){let s=!t?.manualCleanup;s&&!t?.injector&&W(V);let r=s?t?.injector?.get(Re)??E(Re):null,n;t?.requireSync?n=Pe({kind:0}):n=Pe({kind:1,value:t?.initialValue});let i=e.subscribe({next:o=>n.set({kind:1,value:o}),error:o=>{if(t?.rejectErrors)throw o;n.set({kind:2,error:o})}});return r?.onDestroy(i.unsubscribe.bind(i)),oe(()=>{let o=n();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new ne(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var is=new R("QUERY_CLIENT_OPTIONS",{providedIn:"root",factory(){return{}}});var Dt=new R("QueryClient",{providedIn:"root",factory(){return new Le(E(is))}}),os=(()=>{let t=class t{constructor(){this.instance=E(Dt),this.instance.mount()}ngOnDestroy(){this.instance.unmount()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),as=new R("QueryClientService",{providedIn:"root",factory(){return st(E(ie))&&E(os),E(Dt)}});function me(){return E(as)}function It({source:e,signal:t}){let s=new ze;return t&&t.addEventListener("abort",()=>{s.next(),s.complete()}),Ve(e.pipe(t?_e(s):r=>r))}function us({client:e,Observer:t,options:s,injector:r}){let n,i=Mt(e,s,r),o=new k(u=>{n||(n=new t(e,i)),u.next(n.getOptimisticResult(i));let d=n.subscribe(y.batchCalls(m=>{u.next(i.notifyOnChangeProps?m:n?.trackResult(m))}));return()=>{d(),n=void 0}}).pipe(Se({bufferSize:1,refCount:!0})),a,c=r&&r._tNode;return{result$:o,updateOptions:u=>{if(n){let d=Mt(e,h(h({},s),u),r);n.setOptions(d,{listeners:!1})}},get result(){return!c&&W(function(){}),a||(a=V(this.result$,{requireSync:!0,injector:c?r:void 0})),a}}}function Mt(e,t,s){let r=e.defaultQueryOptions(t);r._optimisticResults="optimistic";let n=r.queryFn;return n&&(r.queryFn=function(i){let o=this;return J(s,()=>{let a=n.call(o,i);return ve(a)?It({source:a,signal:i.signal}):a})}),r}var Ft=(()=>{var t,s;let r=class r{constructor(){Q(this,t,me());Q(this,s,E(Ce))}use(i){return us({client:I(this,t),injector:i.injector??I(this,s),Observer:qe,options:i})}};t=new WeakMap,s=new WeakMap,r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=T({token:r,factory:r.\u0275fac,providedIn:"root"});let e=r;return e})();function Be(e){if(e?.injector)return J(e.injector,()=>{let s=E(Ft);return s.use.bind(s)});W(Be);let t=E(Ft);return t.use.bind(t)}var cs=(()=>{var t;let s=class s{constructor(){Q(this,t,me())}use(n){let i=new He(I(this,t),p(h({},n),{mutationFn:u=>{let d=n.mutationFn(u);return ve(d)?It({source:d}):d}})),o=new k(u=>{u.next(i.getCurrentResult());let d=i.subscribe(y.batchCalls(m=>u.next(m)));return()=>d()}).pipe(Se({bufferSize:1,refCount:!0})),a=(u,d)=>{i.mutate(u,d).catch(()=>{})},c;return{mutate:a,mutateAsync:i.mutate.bind(i),reset:i.reset.bind(i),setOptions:i.setOptions.bind(i),result$:o,get result(){return c||(c=V(this.result$,{requireSync:!0})),c}}}};t=new WeakMap,s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=T({token:s,factory:s.\u0275fac,providedIn:"root"});let e=s;return e})(),Tn=new R("UseMutation",{providedIn:"root",factory(){let e=new cs;return e.use.bind(e)}});var hs=(()=>{var t;let s=class s{constructor(){Q(this,t,me())}use(n){let i=new k(o=>{o.next(I(this,t).isFetching(n));let a=I(this,t).getQueryCache().subscribe(y.batchCalls(()=>{o.next(I(this,t).isFetching(n))}));return()=>a()}).pipe(Oe());return{result$:i,toSignal:()=>V(i)}}};t=new WeakMap,s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=T({token:s,factory:s.\u0275fac,providedIn:"root"});let e=s;return e})(),Mn=new R("UseIsFetching",{providedIn:"root",factory(){let e=new hs;return e.use.bind(e)}});var ls=(()=>{var t;let s=class s{constructor(){Q(this,t,me())}use(n){let i=new k(o=>{o.next(I(this,t).isMutating(n));let a=I(this,t).getMutationCache().subscribe(y.batchCalls(()=>{o.next(I(this,t).isMutating(n))}));return()=>a()}).pipe(Oe());return{result$:i,toSignal:()=>V(i)}}};t=new WeakMap,s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=T({token:s,factory:s.\u0275fac,providedIn:"root"});let e=s;return e})(),Fn=new R("UseIsFetching",{providedIn:"root",factory(){let e=new ls;return e.use.bind(e)}});function Dn(e,t){return oe(()=>{let s=Array.isArray(e),r=s?e:Object.values(e),n={all:e,isSuccess:r.every(i=>i().isSuccess),isPending:r.some(i=>i().isPending),isLoading:r.some(i=>i().isLoading),isError:r.some(i=>i().isError),isFetching:r.some(i=>i().isFetching),error:r.find(i=>i().isError)?.error,data:void 0};if(n.isSuccess)if(s)n.data=t(r.map(i=>i().data));else{let i=Object.entries(e).reduce((o,[a,c])=>(o[a]=c().data,o),{});n.data=t(i)}return n})}var At="https://fakestoreapi.com/products",ds="https://fakestoreapi.com/products/categories",fs="https://gist.githubusercontent.com/railsstudent/ae150ae2b14abb207f131596e8b283c3/raw/131a6b3a51dfb4d848b75980bfe3443b1665704b/featured-products.json",Qn=(()=>{let t=class t{constructor(){this.httpClient=E(Ie),this.query=Be()}getCategories(){return this.query({queryKey:["categories"],queryFn:()=>this.httpClient.get(ds)})}getProducts(){return this.query({queryKey:["products"],queryFn:()=>this.httpClient.get(At)})}getProduct(r){return this.query({queryKey:["products",r],queryFn:()=>this.getProductQuery(r)})}getProductQuery(r){return this.httpClient.get(`${At}/${r}`).pipe(Xe(n=>(console.error(n),X(void 0))))}getFeaturedProducts(){return this.query({queryKey:["feature_products"],queryFn:()=>this.httpClient.get(fs).pipe(A(({ids:r})=>r),re(r=>{let n=r.map(i=>this.getProductQuery(i));return Ge(n)}),A(r=>{let n=[];return r.forEach(i=>{i&&n.push(i)}),n}))})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();export{ks as a,Dn as b,Qn as c};
