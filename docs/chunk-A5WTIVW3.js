import{b as m,c as $,d as N,e as T}from"./chunk-GYW2RQPY.js";import{D as U,E as F,F as v,G as k,H as A,L as I,M as D,Q as M,a as b,b as x,e as w,f as q,k as C,l as R,n as Q,q as P,r as g,t as p,u as a,za as L}from"./chunk-UVVUGJ4E.js";import{a as j,b as E,d as f,e as y}from"./chunk-U3EYQZXJ.js";function h(n,e){let r=!e?.manualCleanup;r&&!e?.injector&&v(h);let s=r?e?.injector?.get(M)??a(M):null,i;e?.requireSync?i=D({kind:0}):i=D({kind:1,value:e?.initialValue});let t=n.subscribe({next:o=>i.set({kind:1,value:o}),error:o=>{if(e?.rejectErrors)throw o;i.set({kind:2,error:o})}});return s?.onDestroy(t.unsubscribe.bind(t)),I(()=>{let o=i();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new P(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var W=new p("QUERY_CLIENT_OPTIONS",{providedIn:"root",factory(){return{}}});function ve(n){return U([{provide:W,useValue:n}])}var B=new p("QueryClient",{providedIn:"root",factory(){return new $(a(W))}}),G=(()=>{let e=class e{constructor(){this.instance=a(B),this.instance.mount()}ngOnDestroy(){this.instance.unmount()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),H=new p("QueryClientService",{providedIn:"root",factory(){return L(a(A))&&a(G),a(B)}});function O(){return a(H)}function Y({source:n,signal:e}){let r=new x;return e&&e.addEventListener("abort",()=>{r.next(),r.complete()}),q(n.pipe(e?Q(r):s=>s))}function J({client:n,Observer:e,options:r,injector:s}){let i,t=z(n,r,s),o=new b(c=>{i||(i=new e(n,t)),c.next(i.getOptimisticResult(t));let d=i.subscribe(m.batchCalls(S=>{c.next(t.notifyOnChangeProps?S:i?.trackResult(S))}));return()=>{d(),i=void 0}}).pipe(R({bufferSize:1,refCount:!0})),u,l=s&&s._tNode;return{result$:o,updateOptions:c=>{if(i){let d=z(n,j(j({},r),c),s);i.setOptions(d,{listeners:!1})}},get result(){return!l&&v(function(){}),u||(u=h(this.result$,{requireSync:!0,injector:l?s:void 0})),u}}}function z(n,e,r){let s=n.defaultQueryOptions(e);s._optimisticResults="optimistic";let i=s.queryFn;return i&&(s.queryFn=function(t){let o=this;return F(r,()=>{let u=i.call(o,t);return w(u)?Y({source:u,signal:t.signal}):u})}),s}var V=(()=>{var e,r;let s=class s{constructor(){y(this,e,O());y(this,r,a(k))}use(t){return J({client:f(this,e),injector:t.injector??f(this,r),Observer:N,options:t})}};e=new WeakMap,r=new WeakMap,s.\u0275fac=function(o){return new(o||s)},s.\u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"});let n=s;return n})();function K(n){if(n?.injector)return F(n.injector,()=>{let r=a(V);return r.use.bind(r)});v(K);let e=a(V);return e.use.bind(e)}var X=(()=>{var e;let r=class r{constructor(){y(this,e,O())}use(i){let t=new T(f(this,e),E(j({},i),{mutationFn:c=>{let d=i.mutationFn(c);return w(d)?Y({source:d}):d}})),o=new b(c=>{c.next(t.getCurrentResult());let d=t.subscribe(m.batchCalls(S=>c.next(S)));return()=>d()}).pipe(R({bufferSize:1,refCount:!0})),u=(c,d)=>{t.mutate(c,d).catch(()=>{})},l;return{mutate:u,mutateAsync:t.mutate.bind(t),reset:t.reset.bind(t),setOptions:t.setOptions.bind(t),result$:o,get result(){return l||(l=h(this.result$,{requireSync:!0})),l}}}};e=new WeakMap,r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})(),me=new p("UseMutation",{providedIn:"root",factory(){let n=new X;return n.use.bind(n)}});var Z=(()=>{var e;let r=class r{constructor(){y(this,e,O())}use(i){let t=new b(o=>{o.next(f(this,e).isFetching(i));let u=f(this,e).getQueryCache().subscribe(m.batchCalls(()=>{o.next(f(this,e).isFetching(i))}));return()=>u()}).pipe(C());return{result$:t,toSignal:()=>h(t)}}};e=new WeakMap,r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})(),Se=new p("UseIsFetching",{providedIn:"root",factory(){let n=new Z;return n.use.bind(n)}});var _=(()=>{var e;let r=class r{constructor(){y(this,e,O())}use(i){let t=new b(o=>{o.next(f(this,e).isMutating(i));let u=f(this,e).getMutationCache().subscribe(m.batchCalls(()=>{o.next(f(this,e).isMutating(i))}));return()=>u()}).pipe(C());return{result$:t,toSignal:()=>h(t)}}};e=new WeakMap,r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})(),je=new p("UseIsFetching",{providedIn:"root",factory(){let n=new _;return n.use.bind(n)}});function Ie(n,e){return I(()=>{let r=Array.isArray(n),s=r?n:Object.values(n),i={all:n,isSuccess:s.every(t=>t().isSuccess),isPending:s.some(t=>t().isPending),isLoading:s.some(t=>t().isLoading),isError:s.some(t=>t().isError),isFetching:s.some(t=>t().isFetching),error:s.find(t=>t().isError)?.error,data:void 0};if(i.isSuccess)if(r)i.data=e(s.map(t=>t().data));else{let t=Object.entries(n).reduce((o,[u,l])=>(o[u]=l().data,o),{});i.data=e(t)}return i})}export{ve as a,O as b,K as c,Ie as d};
